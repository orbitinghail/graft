.open "file:main?vfs=graft"

.databases
main: main r/w
.vfsinfo
vfs.zName      = "graft"
vfs.iVersion   = 3
vfs.szOsFile   = 248
vfs.mxPathname = 512
pragma graft_status;
+---------------------------------------------------------+
|                       On tag main                       |
+---------------------------------------------------------+
| On tag main                                             |
| Local Volume 5rMJhmfWNM-2e8FSEPeTY97s (_) is grafted to |
| remote Volume 5rMJhmfWNM-2dhso1hdo1Ryc (_).             |
|                                                         |
| The local Volume is up to date with the remote Volume.  |
+---------------------------------------------------------+

CREATE TABLE t1(a, b);
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
SELECT * FROM t1;
+---+---+
| a | b |
+---+---+
| 1 | 2 |
| 3 | 4 |
+---+---+

BEGIN;
SELECT * FROM t1;
+---+---+
| a | b |
+---+---+
| 1 | 2 |
| 3 | 4 |
+---+---+
INSERT INTO t1 VALUES(3, 4);
SELECT * FROM t1;
+---+---+
| a | b |
+---+---+
| 1 | 2 |
| 3 | 4 |
| 3 | 4 |
+---+---+
COMMIT;

pragma graft_status;
+-----------------------------------------------------------+
|                        On tag main                        |
+-----------------------------------------------------------+
| On tag main                                               |
| Local Volume 5rMJhmfWNM-2e8FSEPeTY97s (4) is grafted to   |
| remote Volume 5rMJhmfWNM-2dhso1hdo1Ryc (_).               |
|                                                           |
| The local Volume is 4 commits ahead of the remote Volume. |
|   (use 'pragma graft_push' to push changes)               |
|                                                           |
+-----------------------------------------------------------+

vacuum;
drop table t1;
vacuum;

select * from dbstat;
+---------------+------+--------+----------+-------+---------+--------+------------+----------+--------+
|     name      | path | pageno | pagetype | ncell | payload | unused | mx_payload | pgoffset | pgsize |
+---------------+------+--------+----------+-------+---------+--------+------------+----------+--------+
| sqlite_schema | /    | 1      | leaf     | 0     | 0       | 3988   | 0          | 0        | 4096   |
+---------------+------+--------+----------+-------+---------+--------+------------+----------+--------+

SQLite Exit Code = 0
